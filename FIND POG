AddHook("onvariant", "finding", function(var)
    if var[0] == "OnSDBroadcast" then 
        return true
    end
    if var[0] == "OnDialogRequest" and var[1]:find("end_dialog|item_finder") then
        return true
    end
    if var[0] == "OnConsoleMessage" and var[1]:find("This doesn't fit") then
        return true
    end
    if var[0] == "OnDialogRequest" and var[1]:find("MAGPLANT 5000") then
        if var[1]:find("The machine is currently empty!") then
        end
        return true
    end
end)

function wrenchu()
SendPacketRaw(false, {type = 3, value = 32, px = x, py = yu, x = GetLocal().pos.x, y = GetLocal().pos.y})
end

function wrenchd()
SendPacketRaw(false, {type = 3, value = 32, px = x, py = yd, x = GetLocal().pos.x, y = GetLocal().pos.y})
end

function put()
if posmag == 1 then
    wrenchu()
    SendPacket(2, "action|dialog_return\ndialog_name|magplant_edit\nx|"..x.."|\ny|"..yu.."|\nbuttonClicked|additems\n")
    Sleep(delay)
elseif posmag == 2 then
    wrenchd()
    SendPacket(2, "action|dialog_return\ndialog_name|magplant_edit\nx|"..x.."|\ny|"..yd.."|\nbuttonClicked|additems\n")
    Sleep(delay)
end
end

while true do
put()
end
